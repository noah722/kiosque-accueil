<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Accueil ‚Äì L-Pittet</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --primary: #005bc0;
      --cyan: #14c6e9;
      --yellow: #ffcc6e;
      --purple: #ec95ff;
      --red: #ff5c65;
      --green: #80e080;

      --bg: #07152b;
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.72);

      --card: rgba(255,255,255,.08);
      --card2: rgba(255,255,255,.06);

      --stroke: rgba(255,255,255,.12);
      --btn: rgba(255,255,255,.10);
      --btnHover: rgba(255,255,255,.18);

      --radius: 26px;
      --shadow: 0 20px 60px rgba(0,0,0,.35);
    }

    *{ box-sizing:border-box }
    body{
      margin:0;
      font-family: "Obviously", Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(1200px 900px at 15% 10%, rgba(20,198,233,.22), transparent 55%),
        radial-gradient(900px 700px at 85% 20%, rgba(0,91,192,.28), transparent 55%),
        radial-gradient(900px 700px at 70% 95%, rgba(236,149,255,.12), transparent 55%),
        var(--bg);
      color: var(--text);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }

    .wrap{ width:min(980px,100%) }

    .brand{
      display:flex;
      align-items:center;
      gap:14px;
      margin-bottom:18px;
    }
    .logo{
      width:46px;height:46px;
      border-radius:14px;
      background: linear-gradient(135deg, var(--primary), var(--cyan));
      box-shadow: var(--shadow);
    }
    .brand h1{ margin:0; font-size:22px; letter-spacing:.3px; }
    .brand p{ margin:2px 0 0 0; font-size:14px; color:var(--muted); }

    .card{
      background: linear-gradient(180deg, var(--card), var(--card2));
      border:1px solid var(--stroke);
      border-radius: var(--radius);
      padding:26px;
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }

    .screen{ display:none }
    .screen.active{ display:block }

    .top{
      display:flex;
      justify-content:space-between;
      gap:20px;
      flex-wrap:wrap;
    }

    .title h2{
      margin:0 0 8px 0;
      font-size:38px;
      line-height:1.1;
      letter-spacing:-.3px;
    }
    .title p{ margin:0; font-size:18px; color:var(--muted); }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:10px 14px;
      border-radius:999px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.06);
      font-size:14px;
      color:var(--muted);
      user-select:none;
    }
    .dot{
      width:10px;height:10px;border-radius:999px;
      background: var(--cyan);
      box-shadow:0 0 0 6px rgba(20,198,233,.18);
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(2,1fr);
      gap:14px;
      margin-top:18px;
    }

    button.big{
      appearance:none;
      border:none;
      cursor:pointer;
      padding:18px;
      min-height:74px;
      border-radius:20px;
      background: var(--btn);
      border:1px solid var(--stroke);
      color:var(--text);
      font-size:20px;
      font-weight:900;
      display:flex;
      align-items:center;
      gap:14px;
      transition: background .15s ease, transform .05s ease;
      width:100%;
      text-align:left;
      -webkit-tap-highlight-color: transparent;
    }
    button.big:hover{ background: var(--btnHover) }
    button.big:active{ transform:scale(.99) }

    .icon{
      width:44px;height:44px;
      border-radius:16px;
      display:grid;
      place-items:center;
      background: rgba(255,255,255,.10);
      font-size:22px;
      flex:0 0 auto;
    }

    .choices{
      display:flex;
      gap:14px;
      margin-top:22px;
      flex-wrap:wrap;
    }
    .choice{
      flex:1;
      min-width:260px;
      padding:20px;
      border-radius:22px;
      border:1px solid var(--stroke);
      background: var(--btn);
      cursor:pointer;
      display:flex;
      justify-content:space-between;
      font-size:22px;
      font-weight:900;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .choice:hover{ background: var(--btnHover) }
    .choice.alt{ outline:2px solid rgba(20,198,233,.25) }

    .hint{
      margin-top:10px;
      color: var(--muted);
      font-size:15px;
      line-height:1.35;
    }

    .form{
      margin-top:18px;
      display:grid;
      grid-template-columns: repeat(2, 1fr);
      gap:12px;
    }
    .field{ display:flex; flex-direction:column; gap:8px; }
    label{ font-size:14px; color: var(--muted); font-weight:800; }
    input{
      width:100%;
      padding:14px 14px;
      border-radius:16px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.08);
      color: var(--text);
      font-size:18px;
      outline:none;
    }
    input:focus{
      border-color: rgba(20,198,233,.45);
      box-shadow: 0 0 0 4px rgba(20,198,233,.12);
    }
    .full{ grid-column: 1 / -1; }

    .actionsRow{
      margin-top:16px;
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .btnSmall{
      min-height:56px;
      font-size:18px;
      font-weight:900;
      padding:14px 16px;
      border-radius:18px;
      border:1px solid var(--stroke);
      background: var(--btn);
      color: var(--text);
      cursor:pointer;
      -webkit-tap-highlight-color: transparent;
    }
    .btnSmall:hover{ background: var(--btnHover) }
    .btnPrimary{
      background: linear-gradient(135deg, rgba(0,91,192,.75), rgba(20,198,233,.55));
      border-color: rgba(255,255,255,.18);
    }

    .error{
      margin-top:12px;
      padding:12px 14px;
      border-radius:16px;
      border:1px solid rgba(255,92,101,.35);
      background: rgba(255,92,101,.10);
      color: rgba(255,255,255,.92);
      display:none;
      font-size:15px;
      font-weight:800;
    }

    .center{
      text-align:center;
      padding:26px 8px;
    }
    .center h2{ margin:0 0 8px 0; font-size:42px; }
    .center p{ margin:0; font-size:18px; color:var(--muted); }
    .spinner{
      margin:20px auto 0;
      width:46px;height:46px;
      border-radius:999px;
      border:4px solid rgba(255,255,255,.2);
      border-top-color: var(--cyan);
      animation: spin 1s linear infinite;
    }
    @keyframes spin{ to{ transform:rotate(360deg) } }

    .version{
      position:absolute;
      right:14px;
      bottom:10px;
      font-size:12px;
      color: rgba(255,255,255,.45);
      user-select:none;
    }

    @media(max-width:720px){
      .grid{ grid-template-columns:1fr }
      .form{ grid-template-columns: 1fr }
      .title h2{ font-size:30px }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="brand">
      <div class="logo"></div>
      <div>
        <h1>L-Pittet</h1>
        <p>Accueil & informations</p>
      </div>
    </div>

    <div class="card">
      <!-- √âCRAN 1 -->
      <div id="s1" class="screen active">
        <div class="top">
          <div class="title">
            <h2>Bienvenue üëã</h2>
            <p>Choisissez ce que vous venez faire aujourd‚Äôhui.</p>
          </div>
          <div class="pill"><span class="dot"></span> R√©ception</div>
        </div>

        <div class="grid">
          <button type="button" class="big" onclick="pick('info')">
            <span class="icon">‚ÑπÔ∏è</span> Informations & r√©servations
          </button>

          <button type="button" class="big" onclick="pick('cours')">
            <span class="icon">üìö</span> J‚Äôai un cours r√©serv√©
          </button>

          <button type="button" class="big" onclick="pick('moto')">
            <span class="icon">üèçÔ∏è</span> J‚Äôai lou√© une moto
          </button>

          <button type="button" class="big" onclick="pick('equip')">
            <span class="icon">üß§</span> Je souhaite louer de l‚Äô√©quipement
          </button>
        </div>

        <p class="hint">Vos informations servent uniquement √† vous accueillir et √† vous orienter.</p>
      </div>

      <!-- √âCRAN 2 : sous-choix cours -->
      <div id="s2" class="screen">
        <div class="top">
          <div class="title">
            <h2>Votre cours est :</h2>
            <p class="hint">Choisissez une option.</p>
          </div>
          <div class="pill"><span class="dot"></span> √âtape 2</div>
        </div>

        <div class="choices">
          <div class="choice alt" onclick="pick('cours_prive')">
            <span>üë§ Cours priv√©</span><span style="color:var(--cyan)">OK</span>
          </div>
          <div class="choice alt" onclick="pick('cours_groupe')">
            <span>üë• Cours en groupe</span><span style="color:var(--cyan)">OK</span>
          </div>
        </div>

        <div class="actionsRow">
          <button type="button" class="btnSmall" onclick="resetAll()">‚Ü©Ô∏è Retour</button>
        </div>
      </div>

      <!-- √âCRAN 3 : formulaire + consignes -->
      <div id="s3" class="screen">
        <div class="top">
          <div class="title">
            <h2 id="formTitle">Vos coordonn√©es</h2>
            <p id="formSubtitle" class="hint"></p>
          </div>
          <div class="pill"><span class="dot"></span> Derni√®re √©tape</div>
        </div>

        <div class="form">
          <div class="field">
            <label for="firstName">Pr√©nom *</label>
            <input id="firstName" autocomplete="given-name" placeholder="Ex : Noah" />
          </div>

          <div class="field">
            <label for="lastName">Nom *</label>
            <input id="lastName" autocomplete="family-name" placeholder="Ex : Pittet" />
          </div>

          <div id="phoneField" class="field full" style="display:none;">
            <label for="phone">T√©l√©phone *</label>
            <input id="phone" autocomplete="tel" placeholder="Ex : 079 123 45 67" />
          </div>

          <div class="field full">
            <div class="hint" id="instructions"></div>
          </div>
        </div>

        <div id="err" class="error"></div>

        <div class="actionsRow">
          <button type="button" class="btnSmall" onclick="resetAll()">‚Ü©Ô∏è Revenir au d√©but</button>
          <button type="button" class="btnSmall btnPrimary" onclick="submit()">Valider</button>
        </div>
      </div>

      <!-- √âCRAN 4 : merci -->
      <div id="s4" class="screen">
        <div class="center">
          <h2>Merci üôè</h2>
          <p id="finalText">C‚Äôest not√©.</p>
          <div class="spinner"></div>
          <p style="margin-top:12px;color:var(--muted)">
            Retour √† l‚Äôaccueil dans <span id="count">6</span>‚Ä¶
          </p>
        </div>
      </div>

      <div class="version">VERSION: 2026-02-03-v2</div>
    </div>
  </div>

<script>
  // ‚úÖ Mets ici l‚ÄôURL du webhook Make (quand tu l‚Äôas)
  const MAKE_WEBHOOK_URL = "";

  // Optionnel (si tu veux stocker agence / lieu)
  const AGENCY = "R√©ception";

  const state = {
    flow: null,
    needPhone: false
  };

  function show(id){
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
  }

  function resetAll(){
    state.flow = null;
    state.needPhone = false;
    document.getElementById('firstName').value = "";
    document.getElementById('lastName').value = "";
    document.getElementById('phone').value = "";
    document.getElementById('phoneField').style.display = "none";
    document.getElementById('err').style.display = "none";
    show('s1');
  }

  function pick(flow){
    if(flow === 'cours'){
      show('s2');
      return;
    }
    configureForm(flow);
    show('s3');
  }

  function configureForm(flow){
    state.flow = flow;

    const phoneField = document.getElementById('phoneField');
    const subtitle = document.getElementById('formSubtitle');
    const instructions = document.getElementById('instructions');
    const title = document.getElementById('formTitle');

    state.needPhone = (flow === 'equip');
    phoneField.style.display = state.needPhone ? "block" : "none";

    title.textContent = "Vos coordonn√©es";
    subtitle.textContent = "Merci d‚Äôindiquer au minimum votre pr√©nom et votre nom.";

    if(flow === 'info'){
      instructions.textContent = "Merci. Une personne pourra vous renseigner d√®s que possible.";
    } else if(flow === 'cours_prive'){
      instructions.textContent = "Parfait üëç Tu peux t‚Äôinstaller, boire quelque chose √† la caf√©t√©ria ou aller aux toilettes. Ton moniteur viendra te chercher.";
    } else if(flow === 'cours_groupe'){
      instructions.textContent = "Parfait üëç Ton cours aura lieu dans la salle de cours. Tu peux entrer et tourner √† droite derri√®re ce comptoir.";
    } else if(flow === 'moto'){
      instructions.textContent = "Un SMS s‚Äôest automatiquement envoy√© 15 minutes avant le d√©but de ta location avec un lien. Il te suffit de cliquer dessus pour obtenir ton code cl√©, r√©cup√©rer ta moto et profiter üèçÔ∏è";
    } else if(flow === 'equip'){
      title.textContent = "Location d‚Äô√©quipement";
      subtitle.textContent = "Merci d‚Äôindiquer ton pr√©nom, nom et t√©l√©phone. Nous pr√©venons la secr√©taire.";
      instructions.textContent = "Apr√®s validation, la secr√©taire est notifi√©e pour venir te renseigner.";
    }

    document.getElementById('err').style.display = "none";
  }

  function flowLabel(flow){
    switch(flow){
      case 'info': return "Informations & r√©servations";
      case 'cours_prive': return "Cours r√©serv√© ‚Äì priv√©";
      case 'cours_groupe': return "Cours r√©serv√© ‚Äì groupe";
      case 'moto': return "Location moto";
      case 'equip': return "Location √©quipement";
      default: return "Inconnu";
    }
  }

  function validate(){
    const fn = document.getElementById('firstName').value.trim();
    const ln = document.getElementById('lastName').value.trim();
    const ph = document.getElementById('phone').value.trim();

    if(!fn || !ln){
      showError("Merci de renseigner au minimum le pr√©nom et le nom.");
      return false;
    }
    if(state.needPhone && !ph){
      showError("Merci de renseigner votre t√©l√©phone.");
      return false;
    }
    document.getElementById('err').style.display = "none";
    return true;
  }

  function showError(msg){
    const e = document.getElementById('err');
    e.textContent = msg;
    e.style.display = "block";
  }

  async function submit(){
    if(!validate()) return;

    const payload = {
      firstName: document.getElementById('firstName').value.trim(),
      lastName: document.getElementById('lastName').value.trim(),
      phone: (document.getElementById('phone').value.trim() || null),
      flow: state.flow,
      flowLabel: flowLabel(state.flow),
      agency: AGENCY,
      timestamp: new Date().toISOString(),
      needsSecretary: (state.flow === 'equip')
    };

    show('s4');

    const finalText = document.getElementById('finalText');
    if(state.flow === 'equip'){
      finalText.textContent = "Merci. La secr√©taire a √©t√© pr√©venue et arrive.";
    } else if(state.flow === 'moto'){
      finalText.textContent = "Merci. Bonne location üèçÔ∏è";
    } else {
      finalText.textContent = "Merci. C‚Äôest not√©.";
    }

    if(MAKE_WEBHOOK_URL){
      try{
        await fetch(https://hook.eu2.make.com/wezbhxrv8u3n9h6ilgda2rw3e57r5y26, {
          method: "POST",
          headers: {"Content-Type":"application/json"},
          body: JSON.stringify(payload)
        });
      } catch(e) {
        // on ne casse jamais l‚Äôexp√©rience utilisateur
      }
    }

    // retour auto
    let s = 6;
    const el = document.getElementById('count');
    el.textContent = s;
    const t = setInterval(()=>{
      s--; el.textContent = s;
      if(s<=0){ clearInterval(t); resetAll(); }
    }, 1000);
  }
</script>
</body>
</html>

