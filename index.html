<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Accueil ‚Äì L-Pittet</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    :root{
       /* Palette rose */
  --pink: #ec95ff;
  --pink-soft: rgba(236,149,255,.18);
  --pink-strong: #ff7adf;

  /* Couleurs existantes */
  --primary:#005bc0;
  --cyan:#14c6e9;
  --red:#ff5c65;
  --green:#80e080;

  --bg:#07152b;
  --text:rgba(255,255,255,.92);
  --muted:rgba(255,255,255,.72);

  --card:rgba(255,255,255,.10);
  --card2:rgba(255,255,255,.07);
  --stroke:rgba(255,255,255,.14);

  --btn:rgba(236,149,255,.14);
  --btnHover:rgba(236,149,255,.22);

  --radius:26px;
  --shadow:0 20px 60px rgba(0,0,0,.35);
}
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
      radial-gradient(1200px 900px at 15% 10%, rgba(236,149,255,.25), transparent 55%),
      radial-gradient(900px 700px at 85% 20%, rgba(255,122,223,.18), transparent 55%),
      radial-gradient(900px 700px at 70% 95%, rgba(20,198,233,.12), transparent 55%),
      var(--bg);
      color:var(--text);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }

    .wrap{width:min(980px,100%)}

    .brand{
      display:flex;
      align-items:center;
      gap:14px;
      margin-bottom:18px;
    }
    .logo{
      width:46px;height:46px;
      border-radius:14px;
      background: linear-gradient(135deg, var(--primary), var(--cyan));
      box-shadow: var(--shadow);
    }
    .brand h1{margin:0;font-size:22px;letter-spacing:.3px}
    .brand p{margin:2px 0 0 0;font-size:14px;color:var(--muted)}

    .card{
      background: linear-gradient(180deg, var(--card), var(--card2));
      border:1px solid var(--stroke);
      border-radius:var(--radius);
      padding:26px;
      box-shadow:var(--shadow);
      position:relative;
      overflow:hidden;
    }

    .screen{display:none}
    .screen.active{display:block}

    .top{
      display:flex;
      justify-content:space-between;
      gap:20px;
      flex-wrap:wrap;
      align-items:flex-start;
    }

    .title h2{
      margin:0 0 8px 0;
      font-size:38px;
      line-height:1.1;
      letter-spacing:-.3px;
    }
    .title p{margin:0;font-size:18px;color:var(--muted)}

    .pill{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:10px 14px;
      border-radius:999px;
      border:1px solid var(--stroke);
      background:rgba(255,255,255,.06);
      font-size:14px;
      color:var(--muted);
      user-select:none;
    }
    .dot{
      width:10px;height:10px;border-radius:999px;
      background:var(--cyan);
      box-shadow:0 0 0 6px rgba(20,198,233,.18);
    }

    .grid{
      display:grid;
      grid-template-columns:repeat(2,1fr);
      gap:14px;
      margin-top:18px;
    }

      button.big{
    appearance:none;
    border:none;
    cursor:pointer;
    padding:18px;
    min-height:74px;
    border-radius:22px;
    background: linear-gradient(
      135deg,
      rgba(236,149,255,.28),
      rgba(236,149,255,.12)
    );
    border:1px solid rgba(236,149,255,.35);
    color:var(--text);
    font-size:20px;
    font-weight:900;
    display:flex;
    align-items:center;
    gap:14px;
    width:100%;
    text-align:left;
    transition: background .2s ease, transform .06s ease, box-shadow .2s ease;
  }
    
  button.big:hover{
    background: linear-gradient(
      135deg,
      rgba(236,149,255,.38),
      rgba(236,149,255,.18)
    );
    box-shadow: 0 0 0 4px rgba(236,149,255,.18);
  }
  
  button.big:active{
    transform: scale(.98);
  }


    .icon{
      width:44px;height:44px;
      border-radius:16px;
      display:grid;
      place-items:center;
      background:rgba(255,255,255,.10);
      font-size:22px;
      flex:0 0 auto;
    }

    .choices{
      display:flex;
      gap:14px;
      margin-top:22px;
      flex-wrap:wrap;
    }
    .choice{
      flex:1;
      min-width:260px;
      padding:20px;
      border-radius:22px;
      border:1px solid var(--stroke);
      background:var(--btn);
      cursor:pointer;
      display:flex;
      justify-content:space-between;
      font-size:22px;
      font-weight:900;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .choice:hover{background:var(--btnHover)}
    .choice.alt{outline:2px solid rgba(20,198,233,.25)}

    .hint{
      margin-top:10px;
      color:var(--muted);
      font-size:15px;
      line-height:1.35;
    }

    .form{
      margin-top:18px;
      display:grid;
      grid-template-columns:repeat(2,1fr);
      gap:12px;
    }
    .field{display:flex;flex-direction:column;gap:8px}
    label{font-size:14px;color:var(--muted);font-weight:800}
    input{
      width:100%;
      padding:14px;
      border-radius:16px;
      border:1px solid var(--stroke);
      background:rgba(255,255,255,.08);
      color:var(--text);
      font-size:18px;
      outline:none;
    }
    input:focus{
      border-color:rgba(20,198,233,.45);
      box-shadow:0 0 0 4px rgba(20,198,233,.12);
    }
    .full{grid-column:1/-1}

    .actionsRow{
      margin-top:16px;
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .btnSmall{
      min-height:56px;
      font-size:18px;
      font-weight:900;
      padding:14px 16px;
      border-radius:18px;
      border:1px solid var(--stroke);
      background:var(--btn);
      color:var(--text);
      cursor:pointer;
    }
    .btnSmall:hover{background:var(--btnHover)}
    .btnPrimary{
      background:linear-gradient(135deg, rgba(0,91,192,.75), rgba(20,198,233,.55));
      border-color:rgba(255,255,255,.18);
    }

    .error{
      margin-top:12px;
      padding:12px 14px;
      border-radius:16px;
      border:1px solid rgba(255,92,101,.35);
      background:rgba(255,92,101,.10);
      color:rgba(255,255,255,.92);
      display:none;
      font-size:15px;
      font-weight:800;
    }

    .center{text-align:center;padding:26px 8px}
    .center h2{margin:0 0 8px 0;font-size:42px}
    .center p{margin:0;font-size:18px;color:var(--muted)}
    .spinner{
      margin:20px auto 0;
      width:46px;height:46px;border-radius:999px;
      border:4px solid rgba(255,255,255,.2);
      border-top-color:var(--cyan);
      animation:spin 1s linear infinite;
    }
    @keyframes spin{to{transform:rotate(360deg)}}

    .version{
      position:absolute;
      right:14px;bottom:10px;
      font-size:12px;
      color:rgba(255,255,255,.45);
      user-select:none;
    }

    .jsok{
      position:fixed;
      left:10px;bottom:10px;
      padding:8px 10px;
      border-radius:12px;
      background:rgba(0,0,0,.5);
      color:#fff;
      font:12px system-ui;
      z-index:999999;
      opacity:.75;
      user-select:none;
      pointer-events:none;
    }

    @media(max-width:720px){
      .grid{grid-template-columns:1fr}
      .form{grid-template-columns:1fr}
      .title h2{font-size:30px}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="brand">
      <div class="logo"></div>
      <div>
        <h1>Accueil</h1>
        <p>Nous sommes la pour vous aider.</p>
      </div>
    </div>

    <div class="card">
      <!-- STEP 1 -->
      <div id="s1" class="screen active">
        <div class="top">
          <div class="title">
            <h2>Bienvenue üëã</h2>
            <p>Choisissez ce que vous venez faire aujourd hui.</p>
          </div>
          <div class="pill"><span class="dot"></span> Reception</div>
        </div>

        <div class="grid">
          <button type="button" class="big" onclick="pick('info')">
            <span class="icon">‚ÑπÔ∏è</span> Informations et reservations
          </button>

          <button type="button" class="big" onclick="pick('cours')">
            <span class="icon">üìö</span> J ai un cours reserve
          </button>

          <button type="button" class="big" onclick="pick('moto')">
            <span class="icon">üèçÔ∏è</span> J ai loue une moto
          </button>

          <button type="button" class="big" onclick="pick('equip')">
            <span class="icon">üß§</span> Je souhaite louer de l equipement
          </button>
        </div>

        <p class="hint">Les informations sont utilisees uniquement pour l accueil.</p>
      </div>

      <!-- STEP 2 -->
      <div id="s2" class="screen">
        <div class="top">
          <div class="title">
            <h2>Votre cours est :</h2>
            <p class="hint">Choisissez une option.</p>
          </div>
          <div class="pill"><span class="dot"></span> Etape 2</div>
        </div>

        <div class="choices">
          <div class="choice alt" onclick="pick('cours_prive')">
            <span>üë§ Cours prive</span><span style="color:var(--cyan)">OK</span>
          </div>
          <div class="choice alt" onclick="pick('cours_groupe')">
            <span>üë• Cours en groupe</span><span style="color:var(--cyan)">OK</span>
          </div>
        </div>

        <div class="actionsRow">
          <button type="button" class="btnSmall" onclick="resetAll()">‚Ü©Ô∏è Retour</button>
        </div>
      </div>

      <!-- STEP 3 -->
      <div id="s3" class="screen">
        <div class="top">
          <div class="title">
            <h2 id="formTitle">Vos coordonnees</h2>
            <p id="formSubtitle" class="hint"></p>
          </div>
          <div class="pill"><span class="dot"></span> Derniere etape</div>
        </div>

        <div class="form">
          <div class="field">
            <label for="firstName">Prenom *</label>
            <input id="firstName" autocomplete="given-name" placeholder="Ex : Noah" />
          </div>

          <div class="field">
            <label for="lastName">Nom *</label>
            <input id="lastName" autocomplete="family-name" placeholder="Ex : Pittet" />
          </div>

          <div id="phoneField" class="field full" style="display:none;">
            <label for="phone">Telephone *</label>
            <input id="phone" autocomplete="tel" placeholder="Ex : 079 123 45 67" />
          </div>

          <div class="field full">
            <div class="hint" id="instructions"></div>
          </div>
        </div>

        <div id="err" class="error"></div>

        <div class="actionsRow">
          <button type="button" class="btnSmall" onclick="resetAll()">‚Ü©Ô∏è Debut</button>
          <button type="button" class="btnSmall btnPrimary" onclick="submitForm()">Valider</button>
        </div>
      </div>

      <!-- STEP 4 -->
      <div id="s4" class="screen">
        <div class="center">
          <h2>Merci üôè</h2>
          <p id="finalText">C est note.</p>
          <div class="spinner" aria-hidden="true"></div>
          <p style="margin-top:12px;color:var(--muted)">
            Retour a l accueil dans <span id="count">6</span>...
          </p>
        </div>
      </div>

      <div class="version">VERSION: SAFE-ASCII-1</div>
    </div>
  </div>

  <div class="jsok" id="jsok">JS loading...</div>

<script>
  // Make webhook (yours)
  var MAKE_WEBHOOK_URL = "https://hook.eu2.make.com/wezbhxrv8u3n9h6ilgda2rw3e57r5y26";
  var AGENCY = "Reception";

  var state = { flow: null, needPhone: false };

  function show(id){
    var screens = document.querySelectorAll(".screen");
    for(var i=0;i<screens.length;i++){ screens[i].classList.remove("active"); }
    document.getElementById(id).classList.add("active");
  }

  function resetAll(){
    state.flow = null;
    state.needPhone = false;
    document.getElementById("firstName").value = "";
    document.getElementById("lastName").value = "";
    document.getElementById("phone").value = "";
    document.getElementById("phoneField").style.display = "none";
    document.getElementById("err").style.display = "none";
    show("s1");
  }

  function pick(flow){
    if(flow === "cours"){
      show("s2");
      return;
    }
    configureForm(flow);
    show("s3");
  }

  function configureForm(flow){
    state.flow = flow;
    state.needPhone = (flow === "equip");

    document.getElementById("phoneField").style.display = state.needPhone ? "block" : "none";

    var title = document.getElementById("formTitle");
    var subtitle = document.getElementById("formSubtitle");
    var instructions = document.getElementById("instructions");

    title.textContent = "Vos coordonnees";
    subtitle.textContent = "Merci d indiquer au minimum votre prenom et votre nom.";

    if(flow === "info"){
      instructions.textContent = "Merci. Une personne pourra vous renseigner des que possible.";
    } else if(flow === "cours_prive"){
      instructions.textContent = "Parfait. Vous pouvez vous installer, boire quelque chose a la cafetaria ou aller aux toilettes. Votre moniteur viendra vous chercher.";
    } else if(flow === "cours_groupe"){
      instructions.textContent = "Parfait. Votre cours aura lieu dans la salle de cours. Vous pouvez entrer et tourner a droite derriere ce comptoir.";
    } else if(flow === "moto"){
      instructions.textContent = "Un SMS est envoye automatiquement 15 minutes avant le debut de la location avec un lien. Cliquez dessus pour obtenir le code, recuperer la moto et profiter.";
    } else if(flow === "equip"){
      title.textContent = "Location d equipement";
      subtitle.textContent = "Merci d indiquer prenom, nom et telephone. Nous prevenons la secretaire.";
      instructions.textContent = "Apres validation, la secretaire est notifiee pour venir vous aider.";
    }

    document.getElementById("err").style.display = "none";
  }

  function flowLabel(flow){
    if(flow === "info") return "Informations et reservations";
    if(flow === "cours_prive") return "Cours reserve - prive";
    if(flow === "cours_groupe") return "Cours reserve - groupe";
    if(flow === "moto") return "Location moto";
    if(flow === "equip") return "Location equipement";
    return "Inconnu";
  }

  function showError(msg){
    var e = document.getElementById("err");
    e.textContent = msg;
    e.style.display = "block";
  }

  function validate(){
    var fn = document.getElementById("firstName").value.trim();
    var ln = document.getElementById("lastName").value.trim();
    var ph = document.getElementById("phone").value.trim();

    if(!fn || !ln){
      showError("Merci de renseigner au minimum le prenom et le nom.");
      return false;
    }
    if(state.needPhone && !ph){
      showError("Merci de renseigner le telephone.");
      return false;
    }
    document.getElementById("err").style.display = "none";
    return true;
  }

  function startCountdown(seconds){
    var s = seconds;
    var el = document.getElementById("count");
    el.textContent = String(s);

    var t = setInterval(function(){
      s -= 1;
      el.textContent = String(s);
      if(s <= 0){
        clearInterval(t);
        resetAll();
      }
    }, 1000);
  }

  async function submitForm(){
    if(!validate()) return;

    var payload = {
      firstName: document.getElementById("firstName").value.trim(),
      lastName: document.getElementById("lastName").value.trim(),
      phone: (document.getElementById("phone").value.trim() || null),
      flow: state.flow,
      flowLabel: flowLabel(state.flow),
      needsSecretary: (state.flow === "equip"),
      agency: AGENCY,
      timestamp: new Date().toISOString()
    };

    show("s4");

    var finalText = document.getElementById("finalText");
    if(state.flow === "equip"){
      finalText.textContent = "Merci. La secretaire a ete prevenu(e) et arrive.";
    } else if(state.flow === "moto"){
      finalText.textContent = "Merci. Bonne location.";
    } else {
      finalText.textContent = "Merci. C est note.";
    }

    try{
      await fetch(MAKE_WEBHOOK_URL, {
        method: "POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify(payload)
      });
    } catch(e){
      // do nothing (kiosk UX first)
      console.warn("Webhook error", e);
    }

    startCountdown(6);
  }

  // Visible indicator that JS loaded
  document.getElementById("jsok").textContent = "JS OK";
</script>

</body>
</html>
